(function(e){e.fn.hasAttr=function(e){var e=this.attr(e);return typeof e!=="undefined"&&e!==false}})(jQuery);(function(e){var t={init:function(t){var t=e.extend({orientation:"horizontal"},t);return this.each(function(){function s(e){var t=n.offset();if(n.data("orientation")=="horizontal"){o(e.pageX-t.left)}else{u(e.pageY-t.top)}}function o(e){var t=n.width();if(e<0)e=0;else if(e>t)e=t;var i=e/t;r.css("width",i*100+"%");n.trigger("seek",[i])}function u(e){var t=n.height();if(e<0)e=0;else if(e>t)e=t;var i=1-e/t;r.css("height",i*100+"%");n.trigger("seek",[i])}var n=e(this);n.data("orientation",t.orientation);var r=n.find("."+n.attr("class")+"-bar");var i=false;n.on("mousedown",function(t){t.preventDefault();e(document).on("mouseup.player",function(t){t.preventDefault();e(document).off("mouseup.player");n.trigger("endSeek");e(document).off("mousemove.player")});if(n.triggerHandler("beforeSeek")==false){return}e(document).on("mousemove.player",function(e){s(e)});i=true;n.trigger("beginSeek");s(t)})})},orientation:function(t){return this.each(function(){e(this).data("orientation",t)})},seek:function(t){if(t<0)t=0;else if(t>1)t=1;return this.each(function(){var n=e(this);var r=n.find("."+n.attr("class")+"-bar");if(n.data("orientation")=="horizontal"){r.css("width",t*100+"%")}else{r.css("height",t*100+"%")}})}};e.fn.seekSlider=function(n){if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return t.init.apply(this,arguments)}else{e.error("Method "+n+" does not exist")}}})(jQuery);(function(e){var t=document.getElementsByTagName("script");var n=t[t.length-1];var r=e(n).attr("src").split("/");r.pop();var i=r.join("/")+"/";if(r[r.length-1]=="js"){r.pop();r.push("css");var s=r.join("/")+"/"}else{var s=i}e.fn.kit_HTML5VideoPlayer=function(t){function n(){if(e("#debug").length){var t=e("#debug").text();e("#debug").text("");e(arguments).each(function(t,n){if(typeof n=="string"){e("#debug").text(e("#debug").text()+(""+n)+((""+n).length<=4?"	":"")+((""+n).length<8?"	":"")+((""+n).length<12?"	":"")+((""+n).length<16?"	":"")+"	")}else{e("#debug").text(e("#debug").text()+(""+n)+((""+n).length<=4?"	":"")+"	")}});e("#debug").text(e("#debug").text()+"\n"+t);return true}return false}function r(){if(n.apply(this,arguments))return;if(typeof console!="undefined"&&t.debug&&console.log&&console.log.apply){console.log.apply(console,arguments)}}function i(){if(n.apply(this,arguments))return;if(typeof console!="undefined"&&t.debug&&console.info&&console.info.apply){console.info.apply(console,arguments)}}function s(){if(n.apply(this,arguments))return;if(typeof console!="undefined"){if(typeof console.error=="function"&&console.error&&console.error.apply){console.error.apply(console,arguments)}else{}}}var t=e.extend({width:null,height:null,debug:false,controls:{play:true,mute:true},info:{time:{show_current:true}},playlist:[],clip:null,playing:false,defaults:{volume:.75},skin:"default",indicateAds:false},t);return this.data("player")||this.each(function(){function K(t,n){for(name in n){var r=X[name];if(typeof r=="undefined"){r=name}t.append(r);if(typeof n[name]==="string"){r.data("children",e(n[name]));r.find('*:not(:has("*"))').append(r.data("children"));continue}K(r,n[name])}}function Q(e,t){for(name in t){var n=X[name];if(typeof n!="undefined"){if(typeof t[name]!="string"){Q(n,t[name])}else{n.find(n.data("children")).detach()}e.find(n).detach()}else{e.children().first().detach()}}}function Z(){if(u.volume==0){O.addClass("icon-volume-off").removeClass("icon-volume-up")}else{O.removeClass("icon-volume-off").addClass("icon-volume-up")}}function et(e){u.volume=e;B.seekSlider("seek",e);if(typeof localStorage!="undefined"){localStorage.setItem("volume",e)}}function tt(){for(var e=0;e<t.overlays.positions.length;e++){Y.addOverlayPosition(t.overlays.positions[e])}}function nt(e){var t=null;var n;for(var r=0;r<e.length;r++){var i=u.canPlayType(e[r].type);switch(i){case"probably":if(t==null||i=="maybe"){t=e[r];n="probably"}break;case"maybe":if(t==null){t=e[r];n="maybe"}break}}if(t==null){return null}if(typeof t.resolutions!="undefined"){for(var s in t.resolutions)break;return{type:t.type,resolutions:t.resolutions,src:t.resolutions[s]}}return{type:t.type,src:t.src}}function rt(){n.css({width:h,height:p});x.css({width:h,height:p})}function it(e,t){e=Math.round(e);var t=t||false;var n=Math.floor(e/(60*60));n-=60*60*n;var r=Math.floor(e/60);e-=60*r;var i="";if(n>0||t){if(n<10){n="0"+n}i+=n+":"}if(r<10){r="0"+r}i+=r;if(e<10){e="0"+e}return i+":"+e}function st(){b++;if(b>=Y.clip.ads.length){b=null}}function at(e){if(b!=null&&Y.clip.ads[b].position==e){r("_playNextAd("+e+")",b,Y.clip.ads[b].position);Y.ad=Y.clip.ads[b];n.trigger("load",[Y]);u.src=Y.ad.src;u.load();ot=true;n.addClass("is-playing-ad");st();return true}return false}function ft(){Y.ad=false;n.removeClass("is-playing-ad")}function lt(e){if(!Y.fullscreen){if(u.requestFullscreen){n.get(0).requestFullscreen()}else if(u.mozRequestFullScreen){n.get(0).mozRequestFullScreen()}else if(u.webkitRequestFullscreen){n.get(0).webkitRequestFullscreen()}}else{if(document.cancelFullScreen){document.cancelFullScreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}}}function ct(){if(!at("pre-roll")){u.play()}}function ht(){if(n.triggerHandler("beforepause",[Y])!=false){u.pause()}}function pt(){if(g!=null){g++;if(g>=t.playlist.length){g=0;if(a){Y.load(t.playlist[g]);ct()}}else{Y.load(t.playlist[g]);ct()}}else{if(a){Y.load(t.clip);ct()}}}var n=e(this);var o=n.find("video").eq(0);var u=o.get(0);var a;var f;var l;var c=t.info.time.show_current?1:0;var h=t.width;var p=t.height;var d=false;var v=false;var m=false;var g=null;var y=t.defaults.volume;var b=null;var w={};var E=[];if(typeof localStorage!="undefined"){y=localStorage.getItem("volume");if(y===null){y=t.defaults.volume}}var S=null;var x=e('<div style="position: absolute; width: 640px; height: 280px;" class="wrapper"/>');var T=e('<div class="controls-bar"/>');var N=e('<div class="controls"/>');var C=e('<div class="contents"><ol></ol></div>');var k=e('<div class="overlay"/>');var L=e('<div class="control-timeline"></div>');var A=e('<div class="control-timeline-elements"></div>');var O=e('<i class="icon-white control-button-mute icon-volume-up"></i>');var M=e('<i class="icon-white control-button-play icon-play"></i>');var _=e('<span class="control-info-time"></span>');var D=e('<span class="control-info-time-left"></span>');var P=e('<span class="control-info-time-total"></span>');var H=e('<span class="control-info-time-played"></span>');var B=e('<div class="control-volume"></div>');var j=e('<div class="control-volume-bar"></div>');var F=e('<div class="control-timeline-bar"></div>');var I=e('<div class="kit-player-timeline-caret"><a></a></div>');var q=e('<div class="kit-player-volume-caret"><a></a></div>');var R=e('<i class="icon-white control-fullscreen icon-resize-full"></i>');var U=e('<div class="info-clip-title"></div>');var z=e('<i class="icon-white control-settings icon-cog"></i>');var W=e('<i class="indicator-loading icon-spinner icon-spin icon-2x"></i>');var X={div_wrapper:x,div_controls_bar:T,div_controls:N,div_overlay:k,div_contents:C,div_info_clip_title:U,control_timeline:L,control_timeline_progress:F,control_mute:O,control_play:M,control_time:_,control_volume:B,control_volume_bar:j,control_fullscreen:R,control_time_left:D,control_time_total:P,control_time_played:H,control_settings:z,indicator_loading:W,control_timeline_elements:A,control_timeline_caret:I,control_volume_caret:q};var V={timeAnnotation:{lastAnnotation:null,init:function(){var t=this;L.on("mousemove.timeAnnotation",function(n){var r=e(this).offset();var i=(n.pageX-r.left)/e(this).width();var s=Math.round(i*u.duration);if(s!=t.lastAnnotation){t.lastAnnotation=s;e(this).tooltip("destroy");e(this).tooltip({animate:false,title:s,trigger:"manual"}).tooltip("show")}var o=e(this).siblings(".tooltip");o.css("left",n.pageX-r.left-o.outerWidth()/2)});L.on("mouseout.timeAnnotation",function(){e(this).tooltip("destroy");t.lastAnnotation=null})},destroy:function(){L.off("mousemove.timeAnnotation");L.off("mouseout.timeAnnotation")}},fadingControls:{controlVolumeWidth:null,isFading:false,forceFade:false,fadeIn:function(e){var t=e&&e.data.that||this;if(!t.isFading&&(t.forceFade||T.is(":hidden"))){t.forceFade=false;T.show();t.isFading=3;T.animate({marginBottom:"0"},function(){t.isFading--;L.hide();L.show()});if(!T.has(".control-timeline").length){L.show();L.animate({marginBottom:"0"},function(){t.isFading--})}U.show();U.animate({marginTop:0},500,function(){t.isFading--})}},fadeOut:function(t){var n=t&&t.data.that||this;n.isFading=3;var r=T.outerHeight();if(!T.has(".control-timeline").length){r+=L.outerHeight();L.delay(1e3).animate({marginBottom:"-"+r+"px"},500,function(){L.hide();n.isFading--})}T.delay(1e3).animate({marginBottom:"-"+r+"px"},500,function(){T.hide();n.isFading--});var i=U.outerHeight();U.delay(1e3).animate({marginTop:"-"+i+"px"},500,function(){e(this).hide();n.isFading--})},cancelFade:function(e){T.stop(true);L.stop(true);U.stop(true);var t=e&&e.data.that||this;L.show();T.show();U.show();t.isFading=0;t.forceFade=true;t.fadeIn()},init:function(){var e=this;e.controlVolumeWidth=B.width();B.css("width",0);x.on("mousemove.fadingControls",{that:this},this.fadeIn);x.on("mouseover.fadingControls",{that:this},this.fadeIn);x.on("mouseout.fadingControls",{that:this},this.fadeOut);N.on("mouseover.fadingControls",{that:this},this.cancelFade);T.on("mouseover.fadingControls",{that:this},this.cancelFade);L.on("mouseover.fadingControls",{that:this},this.cancelFade);x.on("mouseover.fadingControls",{that:this},this.cancelFade);O.on("mouseover.fadingControls",function(t){B.clearQueue().animate({width:e.controlVolumeWidth+"px"})});O.on("mouseout.fadingControls",function(e){B.delay(1e3).animate({width:0})});B.on("mouseover.fadingControls",function(t){B.clearQueue().css("width",e.controlVolumeWidth)});B.on("mouseout.fadingControls",function(e){B.delay(1e3).animate({width:0})})},destroy:function(){B.css("width","");x.off(".fadingControls");N.off(".fadingControls");T.off(".fadingControls");L.off(".fadingControls");O.off(".fadingControls");B.off(".fadingControls");this.cancelFade()}},indentTimeline:{init:function(){var t=this;var n=0;var r=0;L.siblings().each(function(){$this=e(this);switch($this.css("cssFloat")){case"left":n+=$this.outerWidth(true);break;case"right":r+=$this.outerWidth(true);break}});var i=(N.outerWidth(true)-N.innerWidth())/2;L.css({left:n+i,right:r+i})},destroy:function(){L.css({left:"",right:""})}},topVolumeBar:{init:function(){B.seekSlider("orientation","vertical");B.hide();O.on("mouseover.topVolumeBar",function(e){var t=O.position();B.css({bottom:O.outerHeight(),right:x.width()-(t.left+O.outerWidth(true))+(O.outerWidth(true)-O.outerWidth())/2,width:O.outerWidth()});B.show()});O.on("mouseout.topVolumeBar",function(e){B.hide()});B.on("mouseover.topVolumeBar",function(t){e(this).show()});B.on("mouseout.topVolumeBar",function(t){e(this).hide()})},destroy:function(){B.show();B.seekSlider("orientation","horizontal");O.off(".topVolumeBar");B.off(".topVolumeBar")}}};var J={"default":{name:"default",features:["indentTimeline"],tree:{div_overlay:{},control_fullscreen:{},div_controls_bar:{div_controls:{control_timeline:{control_timeline_elements:{control_timeline_progress:{}}},control_volume:{control_volume_bar:{}},control_mute:{},control_play:{},control_time:{}}}},init:function(){},destroy:function(){}},yt:{name:"yt",features:["timeAnnotation","fadingControls"],tree:{div_info_clip_title:{},div_overlay:{},indicator_loading:{},div_contents:{},control_timeline:{control_timeline_elements:{control_timeline_progress:{control_timeline_caret:{}}}},div_controls_bar:{div_controls:{control_play:{},control_mute:{},control_volume:{control_volume_bar:{}},control_fullscreen:{},control_settings:{},control_time:{control_time_played:{},"<span> / </span>":{},control_time_total:{}}}}},init:function(){},destroy:function(){}},flat:{name:"flat",features:["indentTimeline","topVolumeBar"],tree:{div_overlay:{},div_controls_bar:{div_controls:{control_timeline:{control_timeline_elements:{control_timeline_progress:{control_timeline_caret:'<i class=" icon-angle-left"></i><i class=" icon-angle-right"></i>'}}},control_volume:{control_volume_bar:{}},control_settings:{},control_fullscreen:{},control_play:{},control_mute:{},control_time:{}}}},init:function(){},destroy:function(){}},bubbles:{name:"bubbles",features:["indentTimeline"],tree:{div_overlay:{},div_controls_bar:{div_controls:{control_timeline:{control_timeline_elements:{control_timeline_progress:{control_timeline_caret:{}}}},control_volume:{control_volume_bar:{}},control_mute:{},control_play:{},control_time:{},control_fullscreen:{}}}},init:function(){},destroy:function(){}}};o.css({position:"absolute"});a=o.hasAttr("loop");f=o.hasAttr("autoplay");l=o.hasAttr("controls");if(l){o.removeAttr("controls")}if(a){o.removeAttr("loop")}if(f){o.removeAttr("autoplay")}var G=null;var Y={clip:null,skin:null,ad:false,overlay:false,fullscreen:false,waiting:false,loadPlaylist:function(e){g=0;t.playlist=e;Y.load(t.playlist[g])},loadSkin:function(t){if(typeof J[t]=="undefined"){s('Skin "'+t+'" not found.');return null}if(Y.skin!=null){if(Y.skin==t)return false;n.removeClass("skin-"+Y.skin);Q(x,J[Y.skin].tree);G.destroy();e(G.features).each(function(){V[this].destroy()});n.trigger("skinchanged",[Y])}Y.skin=t;G=J[Y.skin];K(x,G.tree);n.addClass("skin-"+t);G.init();e(G.features).each(function(){V[this].init()});x.hide().fadeIn(1);return true},load:function(t){E=[];if(!u.paused){u.pause()}if(t.src&&t.type&&u.canPlayType(t.type)!=""){i("loading clip ",t.src,t.type)}else if(t.sources&&t.sources.length){var r;if(r=nt(t.sources)){t.type=r.type;if(r.resolutions){var o="1080p";var a=false;e.each(r.resolutions,function(e,t){if(e==o){a=true}});if(!a){for(o in r.resolutions)break}t.resolution=o;t.resolutions=r.resolutions;t.src=r.resolutions[t.resolution]}else{t.src=r.src}}else{s("No clip found");return false}}else{return false}U.html(t.title);x.find(".kit-player-settings").remove();if(typeof t.cuepoints=="object"&&t.cuepoints.length>0){S=0}else{S=null}ft();if(typeof t.ads=="object"&&t.ads.length>0){b=0;for(var f=0;f<t.ads.length;f++){if(!t.ads[f].position.match(/^(pre|post)-roll$/g)){E.push(t.ads[f])}if(typeof t.ads[f].src!="undefined"){continue}if(typeof t.ads[f].sources!="undefined"){var r;if(r=nt(t.ads[f].sources)){t.ads[f].src=r.src;t.ads[f].type=r.type}continue}delete t.ads[f]}}else{b=null}if(t.contents&&t.contents.length>0){C.find("li").remove();C.show();var l=1/t.contents.length*100;for(var c=0;c<t.contents.length;c++){var h=e('<li><a data-time="'+t.contents[c].time+'">'+t.contents[c].title+"</a></li>");h.css("width",l+"%");C.find("ol").append(h)}}else{C.hide();Y.contents=[]}Y.clip=t;n.trigger("load",[Y]);u.src=Y.clip.src;u.load();return true},addOverlayPosition:function(e){var t={css:{},width:e.width,height:e.height};if(typeof e.bottom!="undefined"){t.css.position="absolute";t.css.bottom=e.bottom+T.outerHeight(true);if(!T.has(".control-timeline").length){t.css.bottom+=L.outerHeight(true)}}if(typeof e.align!="undefined"){if(e.align=="center"){t.css.left="50%"}}w[e.id]=t},hideTimeline:function(){L.hide()},showTimeline:function(){L.show()}};if(typeof u.canPlayType=="undefined"){n.addClass("error-unsupported");n.data("player",{error:"Not supported"});s("HTML5 Video not supported in your Browser");return}n.append(x);k.hide();L.seekSlider();B.seekSlider();Y.loadSkin(t.skin);var ot;var ut;if(h&&p){rt();o.css({width:h,height:p})}else{if(t.debug){i("applying width and height from video resolution")}}R.on("click",lt);n.on("dblclick",lt);e(document).on("mozfullscreenchange webkitfullscreenchange fullscreenchange",function(t){if(Y.fullscreen){Y.fullscreen=false;n.removeClass("is-fullscreen");R.addClass("icon-resize-full").removeClass("icon-resize-small")}else{Y.fullscreen=true;n.addClass("is-fullscreen");R.removeClass("icon-resize-full").addClass("icon-resize-small")}});z.on("click",function(t){if(!x.has(".kit-player-settings").length){var n=e('<div class="kit-player-settings"></div>');n.hide();for(var r in Y.clip.resolutions){var i=e('<a data-resolution="'+r+'"><i class="icon-circle"></i> '+r+"</a>");if(r==Y.clip.resolution)i.addClass("active");n.prepend(i)}x.append(n)}else{var n=x.find(".kit-player-settings")}if(!n.is(":hidden")){n.hide();return}var s=e(this).position();n.css({bottom:e(this).outerHeight(true)+"px",left:s.left-n.outerWidth(true)/2+"px"});n.fadeIn()});C.on("click","li a",function(t){u.currentTime=e(this).attr("data-time")});x.on("click",".kit-player-settings a",function(t){t.preventDefault();t.stopPropagation();ut=u.currentTime;ot=!u.paused;if(ot){u.pause()}u.src=Y.clip.resolutions[e(this).attr("data-resolution")];x.find(".kit-player-settings a.active").removeClass("active");e(this).addClass("active");x.find(".kit-player-settings").hide();return false});M.on("click",function(e){e.preventDefault();e.stopPropagation();if(u.paused){u.play()}else{ht()}});O.on("click",function(e){e.preventDefault();if(!u.volume){if(y==0){y=t.defaults.volume}et(y)}else{y=u.volume;et(0)}B.seekSlider("seek",u.volume)});_.on("click",function(e){if(_.has(".control-info-time-total")||_.has(".control-info-time-left"))return;c=c?0:1;if(c){_.html(it(u.currentTime))}else{_.html(it(u.duration-u.currentTime))}});T.on("dblclick",function(e){e.stopPropagation();return false});x.on("click",function(t){if(!e(t.target).is(x))return;if(Y.ad){n.trigger("ad.click",[Y]);window.open(Y.ad.url)}else{M.trigger("click")}});L.on("beginSeek",function(e){F.stop();m=!u.paused;u.pause()}).on("beforeSeek",function(e){e.stopPropagation();e.preventDefault();var t=jQuery.Event("beforeseek");if(n.triggerHandler(t,[Y])==false){return false}return true}).on("seek",function(e,t){if(t>.997){t=.997}var n=u.duration*t;u.currentTime=n}).on("endSeek",function(e){if(m)u.play()});B.on("beginSeek",function(e){j.stop()}).on("beforeSeek",function(e){e.stopPropagation();e.preventDefault();if(n.triggerHandler("beforevolumechange",[Y])==false){return false}return true}).on("seek",function(e,t){et(t)});o.on("loadedmetadata",function(e){if(h==null){h=o.outerWidth()}if(p==null){p=o.outerHeight()}u.width=h;u.height=p;rt()});o.on("durationchange",function(t){if(Y.ad){if(!Y.ad.duration)Y.ad.duration=u.duration}else{if(!Y.clip.duration)Y.clip.duration=u.duration}if(!Y.ad){A.find(".annotation-ad").remove();e(Y.clip.ads).each(function(){var e;if(typeof this.begin=="string"&&(e=this.begin.match(/^(\d+(?:\.\d+)?)\s?\%$/))){this.begin=e[1]/100*u.duration}else if(this.begin<0){this.begin=u.duration+this.begin}if(typeof this.end!="undefined"){if(typeof this.end=="string"&&(e=this.end.match(/^(\d+(?:\.\d+)?)\s?\%$/))){this.end=e[1]/100*u.duration}else if(this.end<0){this.end=u.duration+this.end}}else if(typeof this.duration!="undefined"){this.end=this.begin+this.duration}else{this.end=u.duration}});e(E).each(function(){var t=e('<div class="annotation-ad"></div>').css("left",this.begin/u.duration*100+"%");if(this.position!="mid-roll")t.css("width",(this.end-this.begin)/u.duration*100+"%");F.before(t)})}else{A.find(".annotation-ad").remove()}D.html(it(u.duration-u.currentTime));H.html(it(0));P.html(it(u.duration));if(!_.has(".control-info-time-total")&&!_.has(".control-info-time-left")&&!c){_.html(it(u.duration))}i("[event.durationchange] duration = ",u.duration)});o.on("canplay",function(e){if(Y.waiting){Y.waiting=false;n.removeClass("waiting");u.pause();u.play()}});o.on("emptied",function(e){L.seekSlider("seek",0)});o.on("play",function(e){if(!u.currentTime&&!Y.ad){if(!at("pre-roll")){u.play()}}else{}});o.on("play",function(e){i("[event.play]");Y.playing=true;if(u.currentTime){n.trigger("resume",[Y])}else{n.trigger("play",[Y])}M.removeClass("icon-play").addClass("icon-pause")});o.on("pause",function(e){Y.playing=false;n.trigger("pause",[Y]);M.removeClass("icon-pause").addClass("icon-play");F.stop()});o.on("ended",function(e){i("[event.ended]");v=true;n.trigger("ended",[Y]);if(Y.overlay){Y.overlay=false;k.hide();k.find(">*").remove()}if(Y.ad){var t=Y.ad.position;ft();if(t=="mid-roll"){n.trigger("load",[Y]);u.src=Y.clip.src;u.load();u.play();ot=true}else if(t=="pre-roll"){if(!at("pre-roll")){n.trigger("load",[Y]);u.src=Y.clip.src;u.load();u.play();ot=true}}else if(t=="post-roll"){if(!at("post-roll")){pt()}}else{s("Position unknown")}}else{if(at("post-roll")){Y.waiting=true}else{pt()}}L.seekSlider("seek",1)});o.on("seeking",function(e){n.addClass("is-seeking");d=true});o.on("seeked",function(e){n.removeClass("is-seeking");d=false;var t=u.currentTime/u.duration;t*=100;t=Math.round(t);F.stop().css({width:t+"%"})});o.on("play abort loadstart stalled loadeddata loadedmetadata seeking seeked waiting playing ended ratechange",function(e){r(e.type,"currentTime:",u.currentTime)});o.on("error",function(e){s("error:",u.error.code,u.src)});o.on("loadeddata",function(e){dt=null;vt=null;if(ut){if(!Y.ad){u.currentTime=ut;ut=null;ot=false}}else{u.currentTime=0}});o.on("loadstart",function(e){if(ot){u.play();ot=false}});o.on("volumechange",function(e){i("[event.volumechange]",u.volume);Z()});o.on("waiting",function(e){i("[event.waiting]");if(!Y.waiting){u.pause();u.play()}Y.waiting=true;n.addClass("waiting")});o.on("canplay",function(e){if(Y.waiting){n.removeClass("waiting");Y.waiting=false}});var dt=null;var vt=null;o.on("timeupdate",function(t){if(_.has(".control-info-time-total")||_.has(".control-info-time-left")){D.html(it(u.duration-u.currentTime));H.html(it(u.currentTime))}else if(c){_.html(it(u.currentTime))}else{_.html(it(u.duration-u.currentTime))}if(d)return;if(vt!=null){if(dt==null){dt=(new Date).getTime()-vt}else{dt=dt*.75+((new Date).getTime()-vt)*.25}}vt=(new Date).getTime();n.trigger("timeupdate",[Y]);if(Y.ad){Y.ad.time=u.currentTime}else{Y.clip.time=u.currentTime}if(!Y.ad&&S!=null&&!u.paused){if(u.currentTime>=Y.clip.cuepoints[S]){n.trigger("cuepoint",[Y,Y.clip.cuepoints[S]]);S++;if(S>=Y.clip.cuepoints.length){S=null;r("[timeupdate] no more cuepoints")}}}if(Y.overlay!=false&&Y.overlay<=u.currentTime){k.find(">*").remove();k.hide();Y.overlay=false}if(!Y.ad&&b!=null){var s=Y.clip.ads[b];var o=s.position;if(o!="pre-roll"&&o!="post-roll"&&u.currentTime>=s.begin){if(o=="mid-roll"){ut=u.currentTime;at("mid-roll")}else if(s.end<u.currentTime){i("_ad.end reached");st()}else{var a=w[s.position];if(typeof a=="object"){switch(s.type){case"application/x-shockwave-flash":case"swf":var f="overlay-"+(new Date).getTime();var l=e("<div/>");l.attr("id",f);k.append(l);swfobject.embedSWF(s.src,f,a.width,a.height,"9.0.0","expressInstall.swf");break;default:if(s.type.match(/^video\/(.*)$/g)){var h=e('<video autoplay width="'+a.width+'" height="'+a.height+'"></video>');if(s.src){h.attr("src",s.src)}else{var p=nt(s.sources);h.attr("src",p.src)}h.get(0).volume=0;k.append(h)}break}k.css(a.css);k.css({width:a.width,height:a.height});if(typeof a.css.left!="undefined"){k.css("marginLeft",-(a.width/2))}k.show();Y.overlay=s.end}st()}}}var v=u.currentTime/u.duration*100;var m=(u.currentTime+(dt==null?.25:dt/1e3))/u.duration*100;F.stop().css("width",v+"%").animate({width:m+"%"},(dt==null?250:dt)/u.playbackRate,"linear")});o.on("progress loadeddata buffered",function(t){L.find(".control-timeline-loaded").remove();if(!u.buffered.length)return;var n=u.buffered.length;var r;for(r=0;r<n;r++){var i=u.buffered.start(r);var s=u.buffered.end(r);var o=e('<div class="control-timeline-loaded"></div>');o.css({position:"absolute",left:i/u.duration*100+"%",width:(s-i)/u.duration*100+"%"});if(r==0){o.addClass("first");if(n>1&&Math.round(s*100)/100==Math.round(u.buffered.start(r+1)*100)/100){o.addClass("connect-right")}}else if(r==n-1){o.addClass("last");if(r>0&&Math.round(i*100)/100==Math.round(u.buffered.end(r-1)*100)/100){o.addClass("connect-left")}}else{if(r>0&&Math.round(i*100)/100==Math.round(u.buffered.end(r-1)*100)/100){o.addClass("connect-left")}if(n>1&&Math.round(s*100)/100==Math.round(u.buffered.start(r+1)*100)/100){o.addClass("connect-right")}}A.prepend(o)}});n.data("player",Y);if(t.playlist.length>0){Y.loadPlaylist(t.playlist)}else if(t.clip!=null){Y.load(t.clip)}if(Y.clip!=null){if(t.debug){}}else{if(t.debug){}return}if(typeof t.overlays!="undefined"){if(typeof t.overlays.positions!="undefined"&&t.overlays.positions.length>0){tt()}}et(y);n.trigger("init",[Y]);if(f){ct()}if(t.analytics){var mt;function gt(){mt=_gat._getTracker(t.analytics);mt._setDomainName("none")}if(typeof _gat=="undefined"){e.getScript("//www.google-analytics.com/ga.js",gt)}else{gt()}function yt(e,t,n){var r;var i;if(Y.ad){r="Ads / "+Y.ad.position;i=Y.ad.title?Y.ad.title:Y.ad.src}else{r="Videos";i=Y.clip.title?Y.clip.title:Y.clip.src}if(!t){mt._trackEvent(r,e,i)}else if(typeof n=="undefined"){mt._trackEvent(r,e,i,parseInt(t))}else{mt._trackEvent(r,e,i,parseInt(t),n?true:false)}}n.on("resume",function(e){yt("Resume",Y.ad?Y.ad.time:Y.clip.time)});n.on("ended",function(e){yt("Finish",Y.ad?Y.ad.time:Y.clip.time)});n.on("ad.click",function(e){if(Y.ad){yt("Click")}});e(window).on("unload",function(e){if(Y.clip&&Y.clip.time){yt("Stop",Y.ad?Y.ad.time:Y.clip.time)}})}})}})(jQuery)